<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>OpenCV - Live image manipulation.</title>
    <!-- From: highlightjs.org -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- PLCheat style and script. -->
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <script type="text/javascript" src="util.js"></script>
    <script type="text/javascript" src="actions.js"></script>
    <script type="text/javascript" src="simple.js"></script>
    <script type="text/javascript" src="scripts.js"></script>
  </head>
  <body>
    <div id="about">
      What is OpenCV Live?
      <div id="about-closer" class="toggle-about">&lt;close&gt;</div>
      <br/>
      <br/>
      <p>
        <span class="quote">
          &quot;I'm a total noob to OpenCV. I don't know how to get the effect
          I want.&quot; - Me.
        </span>
      </p>
      <p>
        Does that sound like you, too? Or maybe you just want to tinker around
        for getting the best result? This is here for you.
      </p>
      <p>
      OpenCV can be a bit complicated to use. This little app aims to:
        <ol/>
          <li>
            Let you select one or more images to experiment on. Using File:///
            lets the server just hold onto the file.
          </li>
          <li>
            Add a call block. Call blocks act as a tree: top being the
            original image(s). Add and remove call blocks as needed. Blocks
            show thumbnails, click the thumbnail to show the original image.
          </li>
          <li>
            While every block can accept multiple input images, their output
            varies.  If the block is intended to work on a single image, it
            creates an output for every input. If it is intended for multiple
            images, it may only create one, or create a few depending on the
            block.
          </li>
          <li>
            Many blocks will take any type of image matrix and operate on it.
            But some will only work on grayscale. Some on color, etc. If a block
            works on grayscale and you pass it a color image, it will auto-convert
            from color to grayscale. But using default values, which might not
            be what you want. Ditto for grayscale to color, or anything involving
            HSV, BGR. We use BGR here as that seems to be the most common for
            opencv. But if popular demand requests RGB, I'll try adding support
            for multiple types.
          </li>
          <li>
            Create your own python call blocks! This lets you experiment with
           things we can't easily do in a flexible call block. For example:
           Find a pair of arucos and draw a line between them? Find a QR code
           and write its contents on the image? Make your own call blocks!
          </li>
          <li>
            Call blocks you create can easily use the calls.
          </li>
          <li>
            Replace images as necessary. Copy call block trees. Archive and
            reload them.
          </li>
        </ol>
      </p>
      <p>
        We would like to thank highlightjs.org for their fantastic code
        highlighting for our python code examples.
      </p>
    </div>
    <div id="user-alert" class="dialog" style="display: none;" data-click="closeme"></div>
    <div id="head" class="cvstyle">
      <div id="topbar">
        <div id="title" class="toggle-about">OpenCVLive&nbsp;<span id="qmark">(About)</span></div>
        <div id="topbar-filler"></div>
      </div>
    </div>
    <div id="sheet">
      <div id="blockcol">
        <h3>Blocks Available</h3>
        <p>(Click &amp; Drag)</p>
        <div class="block block-active drag-start drag-me" data-click="showUploadDialog" data-help="Upload a file image">
          <h3>Add Image</h3>
          <img src="loadimage.png">
        </div>
      </div>
      <div id="main">
      </div>
      <div id="savecol"></div>
    </div>
    <div style="display:none;" id="templates">
      We use get('#templateid').cloneNode().children to fetch the templates.
      Any text before or after it is just comments.

      For toolbox, block selection:
      <div id="block-selector-template">
        <div class="block block-selector" draggable="true">
          <h3 draggable="false"></h3>
          <img draggable="false"/>
        </div>
      </div>

      Active blocks in main:
      <div id="block-active-template">
      </div>

      <div id="upload-template">
        <div class="file-select" data-upload="/uploadImage">
          <input type="file" name="image" multiple>
          <button class="submit" data-click="submitUpload">Upload Image</button>
        </div>
      </div>

      <div id="floater-template">
        <div class="floater drag-me" data-drag="move" data-delete="true">
          <h3 class="drag-start"><span class="name"></span><div class="closer" data-click="deleteparent">X</div></h3>
          <div class="body"></div>
        </div>
      </div>

      On load or reset, main:
      <div id="main-template">
      </div>
    </div>
    <div id="floats">
    </div>
    <div id="localfiles">
    </div>
    <script type="text/javascript">
      (function() {
        setupUI();
      })();
    </script>
  </body>
</html>
